<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Juego Stike con Tienda</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #1e1e1e;
    color: white;
    margin: 0;
    padding: 20px;
    overflow-x: hidden;
  }
  #login {
    text-align: center;
  }
  #game {
    display: none;
    position: relative;
    max-width: 600px;
    margin: 50px auto 0;
    text-align: center;
  }
  #counter, #time, #monedas {
    font-weight: bold;
  }
  #touch-area {
    margin: 20px auto;
    padding: 60px;
    background-color: #333;
    border-radius: 12px;
    user-select: none;
    font-size: 48px;
    cursor: pointer;
    max-width: 300px;
  }
  #result {
    margin-top: 20px;
    font-size: 28px;
  }
  #velocidadEstado {
    margin-top: 5px;
    font-style: italic;
    font-size: 14px;
  }
  /* Tienda arriba derecha */
  #shop {
    position: fixed;
    top: 10px;
    right: 10px;
    background: #222;
    border: 2px solid #444;
    border-radius: 8px;
    padding: 15px;
    width: 220px;
    box-shadow: 0 0 10px #000;
    font-size: 14px;
  }
  #shop h3 {
    margin: 0 0 10px;
  }
  .item {
    background: #333;
    margin-bottom: 10px;
    padding: 8px;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s ease;
    user-select: none;
  }
  .item:hover {
    background-color: #555;
  }
  .item.disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  .item span {
    float: right;
    font-weight: bold;
  }
</style>
</head>
<body>

<h1 style="text-align:center;">Juego Stike con Tienda</h1>

<div id="login" style="text-align:center;">
  <p>Usuario: <input type="text" id="user" /></p>
  <p>ContraseÃ±a: <input type="password" id="pass" /></p>
  <button onclick="login()">Ingresar</button>
  <p id="error" style="color: red;"></p>
</div>

<div id="game">
  <div>
    <span>Contador: <span id="counter">0</span> / 200</span><br/>
    <span>Tiempo: <span id="time">0.0</span>s</span><br/>
    <span>Monedas: <span id="monedas">0</span></span>
  </div>
  <div id="touch-area" onclick="increment()" ontouchstart="increment()">ðŸ“± Toca aquÃ­</div>
  <p id="velocidadEstado">(Velocidad: normal)</p>
  <p id="result"></p>
</div>

<!-- Tienda -->
<div id="shop" style="display:none;">
  <h3>Tienda</h3>
  <div class="item" onclick="buyItem(1)" id="item1">Mejora 1 (x2) - 70 monedas <span>70</span></div>
  <div class="item" onclick="buyItem(2)" id="item2">Mejora 2 (x5) - 150 monedas <span>150</span></div>
  <div class="item" onclick="buyItem(3)" id="item3">Mejora 3 (x10) - 300 monedas <span>300</span></div>
</div>

<script>
  let contador = 0;
  let tiempo = 0;
  let velocidad = 100; // ms, normal
  let tiempoInterval;
  let juegoTerminado = false;
  const tiempoLimite = 50; // segundos
  let esLento = false;
  let monedas = 0;
  let multiplicador = 1; // CuÃ¡nto suma cada clic

  function login() {
    const user = document.getElementById('user').value;
    const pass = document.getElementById('pass').value;
    if(user === 'jorge' && pass === 'jorge'){
      document.getElementById('login').style.display = 'none';
      document.getElementById('game').style.display = 'block';
      document.getElementById('shop').style.display = 'block';
      iniciarTiempo();
      actualizarMonedas();
      actualizarTienda();
    } else {
      document.getElementById('error').innerText = 'Usuario o contraseÃ±a incorrectos.';
    }
  }

  function iniciarTiempo(){
    tiempoInterval = setInterval(()=>{
      if(juegoTerminado) return;
      tiempo += 0.1;
      document.getElementById('time').innerText = tiempo.toFixed(1);
      if(tiempo >= tiempoLimite){
        terminarJuego(false);
      }
    }, velocidad);
  }

  function toggleVelocidad(){
    clearInterval(tiempoInterval);
    if(!esLento){
      velocidad = 200; // mÃ¡s lento
      document.getElementById("velocidadEstado").innerText = "(Velocidad: lenta)";
    } else {
      velocidad = 100; // normal
      document.getElementById("velocidadEstado").innerText = "(Velocidad: normal)";
    }
    esLento = !esLento;
    iniciarTiempo();
  }

  function increment(){
    if(juegoTerminado) return;
    contador += multiplicador;
    monedas += multiplicador;
    document.getElementById('counter').innerText = contador;
    actualizarMonedas();
    if(contador >= 200){
      terminarJuego(true);
    }
    actualizarTienda();
  }

  function terminarJuego(gano){
    juegoTerminado = true;
    clearInterval(tiempoInterval);
    document.getElementById('result').innerText = gano ? 'Â¡Ganaste!' : 'Perdiste ðŸ˜¢';
  }

  // Comprar items
  function buyItem(id){
    if(juegoTerminado) return;
    let cost = 0;
    let mult = 1;
    if(id === 1){
      cost = 70;
      mult = 2;
    } else if(id === 2){
      cost = 150;
      mult = 5;
    } else if(id === 3){
      cost = 300;
      mult = 10;
    }
    if(monedas >= cost){
      monedas -= cost;
      multiplicador = mult;
      actualizarMonedas();
      actualizarTienda();
      alert('Compraste mejora x'+mult);
    } else {
      alert('No tienes suficientes monedas.');
    }
  }

  function actualizarMonedas(){
    document.getElementById('monedas').innerText = monedas;
  }

  function actualizarTienda(){
    // Desactivar botones si no alcanza monedas
    let items = [1,2,3];
    items.forEach(id=>{
      let elem = document.getElementById('item'+id);
      let cost = id === 1 ? 70 : id === 2 ? 150 : 300;
      if(monedas < cost){
        elem.classList.add('disabled');
      } else {
        elem.classList.remove('disabled');
      }
    });
  }

  // Espacio suma (no mantener)
  let spacePressed = false;
  document.addEventListener('keydown', function(e){
    if(e.code === 'Space' && !spacePressed){
      increment();
      spacePressed = true;
    }
    if(e.ctrlKey && !juegoTerminado){
      toggleVelocidad();
    }
  });
  document.addEventListener('keyup', function(e){
    if(e.code === 'Space'){
      spacePressed = false;
    }
  });
</script>

</body>
</html>
